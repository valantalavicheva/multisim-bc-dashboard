<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MultiSIM All Devices ‚Äî Business Case Dashboard</title>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <style>
    :root{--bg:#0b1220;--panel:#0f1b33;--muted:#9db0d0;--text:#e9f0ff;--accent:#7aa2ff;--accent2:#5eead4;--border:rgba(255,255,255,.08);}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,#070b14 0%,#0b1220 60%,#0b1220 100%);color:var(--text);}
    header{padding:18px 22px;border-bottom:1px solid var(--border);position:sticky;top:0;backdrop-filter:blur(10px);background:rgba(11,18,32,.72);}
    header h1{margin:0;font-size:16px;font-weight:650;letter-spacing:.2px;}
    header .sub{margin-top:6px;color:var(--muted);font-size:12px;}
    .wrap{max-width:1200px;margin:0 auto;padding:18px 14px 42px;}
    .grid{display:grid;grid-template-columns:360px 1fr;gap:14px;align-items:start;}
    @media(max-width:980px){.grid{grid-template-columns:1fr;}}
    .card{background:rgba(15,27,51,.72);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);}
    .card h2{margin:0 0 10px 0;font-size:13px;color:#dbe7ff;font-weight:650;}
    .row{display:grid;grid-template-columns:1fr 120px;gap:10px;margin:10px 0;align-items:center;}
    .row label{font-size:12px;color:#dbe7ff;line-height:1.2;}
    .row .val{font-size:12px;color:var(--muted);text-align:right;}
    input[type=range]{width:100%;}
    input[type=number]{width:100%;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:#0b142a;color:var(--text);}
    .tabs{display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap;}
    .tab{padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:#0b142a;color:var(--muted);font-size:12px;cursor:pointer;user-select:none;}
    .tab.active{background:rgba(122,162,255,.18);color:var(--text);border-color:rgba(122,162,255,.35);}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
    @media(max-width:980px){.kpis{grid-template-columns:repeat(2,1fr);}}
    .kpi{padding:12px;border-radius:12px;border:1px solid var(--border);background:rgba(11,20,42,.8);}
    .kpi .t{font-size:11px;color:var(--muted);}
    .kpi .v{margin-top:6px;font-size:16px;font-weight:700;}
    .note{font-size:12px;color:var(--muted);line-height:1.35;}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}
    table{width:100%;border-collapse:collapse;font-size:11px;}
    th,td{padding:6px 8px;border-bottom:1px solid var(--border);}
    th{text-align:left;color:#dbe7ff;font-weight:650;background:rgba(0,0,0,0.3);}
    td{color:var(--muted);}
    td.num{color:var(--text);text-align:right;font-variant-numeric:tabular-nums;}
    .foot{margin-top:10px;font-size:11px;color:var(--muted);}
    a{color:var(--accent2);text-decoration:none;}
    a:hover{text-decoration:underline;}
  </style>
</head>
<body>
  <header>
    <h1>MultiSIM All Devices ‚Äî Business Case Dashboard</h1>
    <div class="sub">12-–º–µ—Å–µ—á–Ω–∞ –ø—Ä–æ–µ–∫—Ü–∏—è ‚Ä¢ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–º–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ A vs B ‚Ä¢ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏ –≥—Ä–∞—Ñ–∏–∫–∏ (hover)</div>
  </header>

  <div class="wrap">
    <div class="grid">
      <div class="card">
        <h2>–ö–æ–Ω—Ç—Ä–æ–ª–∏ (Inputs)</h2>
        <div class="row"><label>–û–±—â–∞ consumer –±–∞–∑–∞</label><div class="val"><span id="baseVal" class="mono"></span></div></div>
        <input id="base" type="number" min="1" step="1000" value="1500000" />
        <div class="row"><label>–ú–µ—Å–µ—á–Ω–∞ —Ç–∞–∫—Å–∞ (–ª–≤)</label><div class="val"><span id="mfVal" class="mono"></span></div></div>
        <input id="mf" type="number" min="0" step="0.01" value="4.99" />
        <div class="row"><label>–ê–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞ —Ç–∞–∫—Å–∞ (–ª–≤)</label><div class="val"><span id="afVal" class="mono"></span></div></div>
        <input id="af" type="number" min="0" step="0.01" value="14.99" />
        <div class="row"><label>–°—Ä–µ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ / user</label><div class="val"><span id="devicesVal" class="mono"></span></div></div>
        <input id="devices" type="range" min="1.0" max="3.0" step="0.1" value="1.2" />
        <div class="row"><label>–¢–∞—Ä–≥–µ—Ç penetration (%)</label><div class="val"><span id="penVal" class="mono"></span></div></div>
        <input id="pen" type="range" min="0" max="10" step="0.1" value="2.0" />
        <div class="row"><label>–î—è–ª Scenario B (%)</label><div class="val"><span id="ratioVal" class="mono"></span></div></div>
        <input id="ratioB" type="range" min="0" max="100" step="1" value="35" />
        <div class="row"><label>–ú–µ—Å–µ—á–µ–Ω churn (%)</label><div class="val"><span id="churnVal" class="mono"></span></div></div>
        <input id="churn" type="range" min="0.5" max="5.0" step="0.1" value="2.0" />
        <div class="foot">Assumption: 12-–º–µ—Å–µ—á–Ω–æ—Ç–æ penetration —Å–µ –¥–æ—Å—Ç–∏–≥–∞ –ª–∏–Ω–µ–π–Ω–æ. Churn —Å–µ –ø—Ä–∏–ª–∞–≥–∞ –≤—ä—Ä—Ö—É –∞–∫—Ç–∏–≤–Ω–∞—Ç–∞ –±–∞–∑–∞ –º–µ—Å–µ—á–Ω–æ.</div>
      </div>

      <div>
        <div class="card" style="margin-bottom:14px;">
          <div class="tabs">
            <div class="tab active" data-tab="tab1">üìà –ü—Ä–∏—Ö–æ–¥–∏</div>
            <div class="tab" data-tab="tab2">üí∏ –ü—Ä–æ–º–æ</div>
            <div class="tab" data-tab="tab3">üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ</div>
            <div class="tab" data-tab="tab4">üìã –ú–µ—Ç—Ä–∏–∫–∏</div>
            <div class="tab" data-tab="tab5">üìä –ú–µ—Å–µ—á–Ω–∞ –ø–µ—á–∞–ª–±–∞</div>
            <div class="tab" data-tab="tab6">‚ÑπÔ∏è Notes</div>
          </div>

          <div id="tab1" class="tabpane">
            <div class="kpis" style="margin-bottom:10px;">
              <div class="kpi"><div class="t">–ì–æ–¥–∏—à–µ–Ω –ø—Ä–∏—Ö–æ–¥ A</div><div class="v" id="kpiRevA"></div></div>
              <div class="kpi"><div class="t">–ì–æ–¥–∏—à–µ–Ω –ø—Ä–∏—Ö–æ–¥ B</div><div class="v" id="kpiRevB"></div></div>
              <div class="kpi"><div class="t">Activations (–≥–æ–¥)</div><div class="v" id="kpiActs"></div></div>
              <div class="kpi"><div class="t">Break-even (–º–µ—Å)</div><div class="v" id="kpiBE"></div></div>
            </div>
            <div id="chartRevenue" style="height:380px;"></div>
          </div>

          <div id="tab2" class="tabpane" style="display:none;">
            <div class="note" style="margin:6px 0 12px;">Foregone = –±–µ–∑–ø–ª–∞—Ç–Ω–∏ –º–µ—Å–µ—Ü–∏ + (–∑–∞ B) –æ—Ç–∫–∞–∑–∞–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—è. Actual = —Ä–µ–∞–ª–µ–Ω –ø—Ä–∏—Ö–æ–¥.</div>
            <div id="chartPromo" style="height:380px;"></div>
          </div>

          <div id="tab3" class="tabpane" style="display:none;"><div id="tableWrap"></div></div>

          <div id="tab4" class="tabpane" style="display:none;">
            <div class="note" style="margin:6px 0 12px;"><b>–î–µ—Ç–∞–π–ª–Ω–∏ –º–µ—Ç—Ä–∏–∫–∏</b> ‚Äî –≤—Å–∏—á–∫–æ –ø–æ –º–µ—Å–µ—Ü–∏</div>
            <div id="chartMetrics" style="height:280px;"></div>
            <div id="metricsTableWrap" style="margin-top:14px;"></div>
          </div>

          <div id="tab5" class="tabpane" style="display:none;">
            <div class="note" style="margin:6px 0 12px;"><b>–ú–µ—Å–µ—á–Ω–∞ –ø–µ—á–∞–ª–±–∞</b> ‚Äî –ø—Ä–∏—Ö–æ–¥–∏ –∏ –Ω–µ—Ç–Ω–∞ –ø–µ—á–∞–ª–±–∞ –ø–æ –º–µ—Å–µ—Ü–∏</div>
            <div id="chartMonthly" style="height:280px;"></div>
            <div id="monthlyProfitTable" style="margin-top:14px;overflow-x:auto;"></div>
          </div>

          <div id="tab6" class="tabpane" style="display:none;">
            <div class="note">
              <b>Scenario A:</b> 1 –º–µ—Å–µ—Ü free, activation fee —Å–µ –ø–ª–∞—â–∞.<br/>
              <b>Scenario B:</b> 3 –º–µ—Å–µ—Ü–∞ free, 0 activation fee.<br/><br/>
              –¢–æ–≤–∞ –µ cash-flow –º–æ–¥–µ–ª.
            </div>
          </div>
        </div>

        <div class="card"><h2>Quick Outputs</h2><div class="note" id="quickOutputs"></div></div>
      </div>
    </div>
  </div>

<script>
const fmtBGN=x=>(isFinite(x)?x:0).toLocaleString('bg-BG',{maximumFractionDigits:0})+' –ª–≤';
const fmtNum=x=>(isFinite(x)?x:0).toLocaleString('bg-BG',{maximumFractionDigits:0});
const clamp=(x,a,b)=>Math.max(a,Math.min(b,x));

function simulate(p){
  const m=12,base=p.base,mf=p.mf,af=p.af,avgD=p.avgDevices,pen=p.pen/100,ratioB=p.ratioB,churn=p.churn/100;
  const totalAdopters=base*pen,totalSIMs=totalAdopters*avgD,newSIMs=totalSIMs/m;
  const newA=Array.from({length:m},_=>newSIMs*(1-ratioB));
  const newB=Array.from({length:m},_=>newSIMs*ratioB);
  let cohortsA=[],cohortsB=[];
  let cumA=0,cumB=0;
  const res={months:Array.from({length:m},(_,i)=>i+1),newA,newB,activeA:[],activeB:[],cashTotalA:[],cashTotalB:[],cumA:[],cumB:[]};
  
  for(let i=0;i<m;i++){
    cohortsA.push({size:newA[i],free:1});cohortsB.push({size:newB[i],free:3});
    const cf=1-churn;cohortsA=c=>{c.size*=cf;return c;}(cohortsA.map(cf));cohortsB=cohortsB.map(cf);
    let subA=0,subB=0;
    cohortsA=cohortsA.map(c=>{if(c.free<=0)subA+=c.size*mf;return{...c,free:c.free-1}});
    cohortsB=cohortsB.map(c=>{if(c.free<=0)subB+=c.size*mf;return{...c,free:c.free-1}});
    const actA=newA[i]*af,actB=0;
    const totA=actA+subA,totB=actB+subB;
    cumA+=totA;cumB+=totB;
    res.activeA.push(cohortsA.reduce((s,c)=>s+c.size,0));
    res.activeB.push(cohortsB.reduce((s,c)=>s+c.size,0));
    res.cashTotalA.push(totA);res.cashTotalB.push(totB);
    res.cumA.push(cumA);res.cumB.push(cumB);
  }
  res.totalCashA=res.cashTotalA.reduce((a,b)=>a+b,0);
  res.totalCashB=res.cashTotalB.reduce((a,b)=>a+b,0);
  res.foregoneA=totalSIMs*(1-ratioB)*mf;
  res.foregoneB=totalSIMs*ratioB*(3*mf+af);
  res.totalActsA=totalSIMs*(1-ratioB);
  res.totalActsB=totalSIMs*ratioB;
  res.totalActs=res.totalActsA+res.totalActsB;
  res.breakEvenMonthsB=mf>0?(3+af/mf):Infinity;
  return res;
}

const els={base:document.getElementById('base'),mf:document.getElementById('mf'),af:document.getElementById('af'),devices:document.getElementById('devices'),pen:document.getElementById('pen'),ratioB:document.getElementById('ratioB'),churn:document.getElementById('churn'),baseVal:document.getElementById('baseVal'),mfVal:document.getElementById('mfVal'),afVal:document.getElementById('afVal'),devicesVal:document.getElementById('devicesVal'),penVal:document.getElementById('penVal'),ratioVal:document.getElementById('ratioVal'),churnVal:document.getElementById('churnVal'),kpiRevA:document.getElementById('kpiRevA'),kpiRevB:document.getElementById('kpiRevB'),kpiActs:document.getElementById('kpiActs'),kpiBE:document.getElementById('kpiBE'),quickOutputs:document.getElementById('quickOutputs'),tableWrap:document.getElementById('tableWrap')};

function params(){
  return{base:clamp(parseFloat(els.base.value||1500000),1,1e9),mf:clamp(parseFloat(els.mf.value||4.99),0,1e6),af:clamp(parseFloat(els.af.value||14.99),0,1e6),avgDevices:clamp(parseFloat(els.devices.value||1.2),1,3),pen:clamp(parseFloat(els.pen.value||2),0,10),ratioB:clamp(parseFloat(els.ratioB.value||35),0,100)/100,churn:clamp(parseFloat(els.churn.value||2),0.5,5)/100};
}

function refresh(){
  const p=params();
  els.baseVal.textContent=fmtNum(p.base);
  els.mfVal.textContent=p.mf.toFixed(2)+' –ª–≤';
  els.afVal.textContent=p.af.toFixed(2)+' –ª–≤';
  els.devicesVal.textContent=p.avgDevices.toFixed(1);
  els.penVal.textContent=p.pen.toFixed(1)+'%';
  els.ratioVal.textContent=Math.round(p.ratioB*100)+'%';
  els.churnVal.textContent=(p.churn*100).toFixed(1)+'%';
}

function render(r,p){
  els.kpiRevA.textContent=fmtBGN(r.totalCashA);
  els.kpiRevB.textContent=fmtBGN(r.totalCashB);
  els.kpiActs.textContent=fmtNum(r.totalActs);
  els.kpiBE.textContent=isFinite(r.breakEvenMonthsB)?r.breakEvenMonthsB.toFixed(1)+' –º.':'‚Äî';

  const traceA={x:r.months,y:r.cumA,type:'scatter',mode:'lines+markers',name:'Scenario A',line:{color:'#7aa2ff',width:3}};
  const traceB={x:r.months,y:r.cumB,type:'scatter',mode:'lines+markers',name:'Scenario B',line:{color:'#5eead4',width:3}};
  Plotly.react('chartRevenue',[traceA,traceB],{paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',margin:{l:50,r:20,t:30,b:40},xaxis:{title:'–ú–µ—Å–µ—Ü',gridcolor:'rgba(255,255,255,.06)'},yaxis:{title:'–ü—Ä–∏—Ö–æ–¥ (–ª–≤)',gridcolor:'rgba(255,255,255,.06)',tickformat:','},legend:{orientation:'h',x:0,y:1.15},font:{color:'#e9f0ff'}},{displayModeBar:false});

  const bar1={x:['A','B'],y:[r.foregoneA,r.foregoneB],name:'Foregone',type:'bar',marker:{color:'rgba(122,162,255,.55)'}};
  const bar2={x:['A','B'],y:[r.totalCashA,r.totalCashB],name:'Actual',type:'bar',marker:{color:'rgba(94,234,212,.55)'}};
  Plotly.react('chartPromo',[bar1,bar2],{barmode:'group',paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',margin:{l:50,r:20,t:30,b:40},xaxis:{title:'–°—Ü–µ–Ω–∞—Ä–∏–π',gridcolor:'rgba(255,255,255,.06)'},yaxis:{title:'–ª–≤',gridcolor:'rgba(255,255,255,.06)',tickformat:','},legend:{orientation:'h',x:0,y:1.15},font:{color:'#e9f0ff'}},{displayModeBar:false});

  const rows=[['–ü—Ä–∏—Ö–æ–¥ (–ª–≤)',fmtBGN(r.totalCashA),fmtBGN(r.totalCashB)],['Activations',fmtNum(Math.round(r.totalActsA)),fmtNum(Math.round(r.totalActsB))],['Foregone (–ª–≤)',fmtBGN(r.foregoneA),fmtBGN(r.foregoneB)],['Net (–ª–≤)',fmtBGN(r.totalCashA-r.foregoneA),fmtBGN(r.totalCashB-r.foregoneB)]];
  let html='<table><thead><tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th><th>Scenario A</th><th>Scenario B</th></tr></thead><tbody>';
  rows.forEach(r=>html+='<tr><td>'+r[0]+'</td><td class="num">'+r[1]+'</td><td class="num">'+r[2]+'</td></tr>');
  html+='</tbody></table>';
  els.tableWrap.innerHTML=html;

  // Tab 4: Metrics chart
  const traceActA={x:r.months,y:r.cashTotalA.map((v,i)=>i===0?v:r.cashTotalA[i]-r.cashTotalA[i-1]),type:'scatter',mode:'lines+markers',name:'Rev A',line:{color:'#7aa2ff',width:2}};
  const traceActB={x:r.months,y:r.cashTotalB.map((v,i)=>i===0?v:r.cashTotalB[i]-r.cashTotalB[i-1]),type:'scatter',mode:'lines+markers',name:'Rev B',line:{color:'#5eead4',width:2}};
  Plotly.react('chartMetrics',[traceActA,traceActB],{paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',margin:{l:50,r:20,t:30,b:40},xaxis:{title:'–ú–µ—Å–µ—Ü',gridcolor:'rgba(255,255,255,.06)'},yaxis:{title:'–ü—Ä–∏—Ö–æ–¥ (–ª–≤)',gridcolor:'rgba(255,255,255,.06)',tickformat:','},legend:{orientation:'h',x:0,y:1.15},font:{color:'#e9f0ff'}},{displayModeBar:false});

  // Tab 5: NEW - Monthly Profit Table
  // Calculate monthly profit: (Activation Revenue + Subscription Revenue) - no costs modeled yet
  const monthlyProfitA = r.cashTotalA.map((v,i)=>i===0?v:r.cashTotalA[i]-r.cashTotalA[i-1]);
  const monthlyProfitB = r.cashTotalB.map((v,i)=>i===0?v:r.cashTotalB[i]-r.cashTotalB[i-1]);
  const cumulativeA = r.cumA;
  const cumulativeB = r.cumB;
  const activeBaseA = r.activeA;
  const activeBaseB = r.activeB;
  
  // Take rate (simplified: new SIMs / base)
  const takeRateA = newA.map(s=>p.pen*(1-p.ratioB)*100);
  const takeRateB = newB.map(s=>p.pen*p.ratioB*100);
  
  // Monthly profit chart
  const traceProfitA={x:r.months,y:monthlyProfitA,type:'scatter',mode:'lines+markers',name:'Profit A',line:{color:'#7aa2ff',width:2}};
  const traceProfitB={x:r.months,y:monthlyProfitB,type:'scatter',mode:'lines+markers',name:'Profit B',line:{color:'#5eead4',width:2}};
  Plotly.react('chartMonthly',[traceProfitA,traceProfitB],{paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',margin:{l:50,r:20,t:30,b:40},xaxis:{title:'–ú–µ—Å–µ—Ü',gridcolor:'rgba(255,255,255,.06)'},yaxis:{title:'–ü–µ—á–∞–ª–±–∞ (–ª–≤)',gridcolor:'rgba(255,255,255,.06)',tickformat:','},legend:{orientation:'h',x:0,y:1.15},font:{color:'#e9f0ff'}},{displayModeBar:false});

  // Monthly profit table
  let mHtml='<table><thead><tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th>';
  for(let i=1;i<=12;i++)mHtml+='<th>'+i+'</th>';
  mHtml+='</tr></thead><tbody>';
  
  // Consumer base (active)
  mHtml+='<tr><td><b>Active Base A</b></td>';
  activeBaseA.forEach(v=>mHtml+='<td class="num">'+fmtNum(Math.round(v))+'</td>');
  mHtml+='</tr><tr><td><b>Active Base B</b></td>';
  activeBaseB.forEach(v=>mHtml+='<td class="num">'+fmtNum(Math.round(v))+'</td>');
  mHtml+='</tr>';
  
  // Take rate
  mHtml+='<tr><td>Take Rate A (%)</td>';
  takeRateA.forEach(v=>mHtml+='<td class="num">'+v.toFixed(2)+'</td>');
  mHtml+='</tr><tr><td>Take Rate B (%)</td>';
  takeRateB.forEach(v=>mHtml+='<td class="num">'+v.toFixed(2)+'</td>');
  mHtml+='</tr>';
  
  // Churn
  mHtml+='<tr><td>Churn (%)</td>';
  r.months.forEach(()=>mHtml+='<td class="num">'+(p.churn*100).toFixed(1)+'</td>');
  mHtml+='</tr>';
  
  // Cumulative
  mHtml+='<tr><td><b>Cumulative A</b></td>';
  cumulativeA.forEach(v=>mHtml+='<td class="num">'+fmtBGN(v)+'</td>');
  mHtml+='</tr><tr><td><b>Cumulative B</b></td>';
  cumulativeB.forEach(v=>mHtml+='<td class="num">'+fmtBGN(v)+'</td>');
  mHtml+='</tr>';
  
  // Monthly Profit
  mHtml+='<tr><td><b>Monthly Profit A</b></td>';
  monthlyProfitA.forEach(v=>mHtml+='<td class="num">'+fmtBGN(v)+'</td>');
  mHtml+='</tr><tr><td><b>Monthly Profit B</b></td>';
  monthlyProfitB.forEach(v=>mHtml+='<td class="num">'+fmtBGN(v)+'</td>');
  mHtml+='</tr>';
  
  mHtml+='</tbody></table>';
  document.getElementById('monthlyProfitTable').innerHTML=mHtml;

  // Quick outputs
  const adopters=p.base*(p.pen/100);
  els.quickOutputs.innerHTML='<div>Target adopters: <span class="mono">'+fmtNum(adopters)+'</span></div><div>Total SIMs: <span class="mono">'+fmtNum(adopters*p.avgDevices)+'</span></div><div>Per month: <span class="mono">'+fmtNum(adopters*p.avgDevices/12)+'</span></div>';
}

function update(){const p=params();refresh();const r=simulate(p);render(r,p);}

document.querySelectorAll('.tab').forEach(t=>{t.addEventListener('click',()=>{document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));t.classList.add('active');const id=t.dataset.tab;document.querySelectorAll('.tabpane').forEach(p=>p.style.display='none');document.getElementById(id).style.display='block';window.dispatchEvent(new Event('resize'));});});
['input','change'].forEach(ev=>{els.base.addEventListener(ev,update);els.mf.addEventListener(ev,update);els.af.addEventListener(ev,update);els.devices.addEventListener(ev,update);els.pen.addEventListener(ev,update);els.ratioB.addEventListener(ev,update);els.churn.addEventListener(ev,update);});
update();
</script>
</body>
</html>
